(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4580:function(e,t,a){Promise.resolve().then(a.bind(a,6608))},6608:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return PlayPage}});var s=a(7437),n=a(2265),i=a(4033),r=a(2246);function CharacterBubble(e){let{actorId:t,name:a,children:i,isTyping:l=!1,delay:o=0}=e,c=r.c[t],d=a||c.name,u="impostor"!==t,[m,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=setTimeout(()=>x(!0),o),t=setTimeout(()=>p(!0),o+300);return()=>{clearTimeout(e),clearTimeout(t)}},[o]);let getThemeClasses=()=>{switch(c.theme){case"emerald":return"bg-emerald-100 border-emerald-200 text-emerald-900";case"rose":return"bg-rose-100 border-rose-200 text-rose-900";default:return"bg-slate-100 border-slate-200 text-slate-900"}};return"system"===t?(0,s.jsx)("div",{className:"flex justify-center my-4 transition-all duration-500 ".concat(m?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),children:(0,s.jsxs)("div",{className:"max-w-2xl",children:[(0,s.jsx)("div",{className:"text-center mb-2",children:(0,s.jsx)("span",{className:"text-sm font-medium text-slate-600",children:d})}),(0,s.jsx)("div",{className:"px-4 py-3 rounded-2xl border-2 ".concat(getThemeClasses()," text-center transition-all duration-300 ").concat(h?"scale-100":"scale-95"),children:l?(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,s.jsx)("div",{className:"animate-pulse",children:"●"}),(0,s.jsx)("div",{className:"animate-pulse",style:{animationDelay:"0.2s"},children:"●"}),(0,s.jsx)("div",{className:"animate-pulse",style:{animationDelay:"0.4s"},children:"●"})]}):i})]})}):(0,s.jsx)("div",{className:"flex my-4 transition-all duration-500 ".concat(u?"justify-start":"justify-end"," ").concat(m?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),children:(0,s.jsxs)("div",{className:"flex items-start space-x-3 max-w-2xl ".concat(u?"flex-row":"flex-row-reverse space-x-reverse"),children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:c.avatar?(0,s.jsx)("img",{src:c.avatar,alt:d,className:"w-12 h-12 rounded-full transition-all duration-300 ".concat(h?"scale-100":"scale-90")}):(0,s.jsx)("div",{className:"transition-all duration-300 ".concat(h?"scale-100":"scale-90"),children:(()=>{let e=c.name.split(" ").map(e=>e[0]).join("").slice(0,2),t="emerald"===c.theme?"bg-emerald-500":"rose"===c.theme?"bg-rose-500":"bg-slate-500";return(0,s.jsx)("div",{className:"w-12 h-12 rounded-full ".concat(t," flex items-center justify-center text-white font-bold text-sm"),children:e})})()})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-600 mb-1 transition-all duration-300 ".concat(u?"text-left":"text-right"," ").concat(h?"opacity-100":"opacity-0"),children:d}),(0,s.jsx)("div",{className:"px-4 py-3 rounded-2xl border-2 ".concat(getThemeClasses()," ").concat(u?"rounded-tl-sm":"rounded-tr-sm"," transition-all duration-300 ").concat(h?"scale-100":"scale-95"),children:l?(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"animate-pulse",children:"●"}),(0,s.jsx)("div",{className:"animate-pulse",style:{animationDelay:"0.2s"},children:"●"}),(0,s.jsx)("div",{className:"animate-pulse",style:{animationDelay:"0.4s"},children:"●"})]}):i})]})]})})}function SceneHeader(e){let{title:t,personaId:a,step:n,totalSteps:i,xp:l,progressPercent:o}=e,c=r.c[a];return(0,s.jsxs)("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:[(0,s.jsx)("div",{className:"h-1 bg-gradient-to-r from-emerald-500 via-amber-500 to-rose-500",children:(0,s.jsx)("div",{className:"h-full bg-slate-200 transition-all duration-300",style:{width:"".concat(100-o,"%"),marginLeft:"auto"}})}),(0,s.jsxs)("div",{className:"px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[c.avatar?(0,s.jsx)("img",{src:c.avatar,alt:c.name,className:"w-8 h-8 rounded-full"}):(()=>{let e=c.name.split(" ").map(e=>e[0]).join("").slice(0,2),t="emerald"===c.theme?"bg-emerald-500":"rose"===c.theme?"bg-rose-500":"bg-slate-500";return(0,s.jsx)("div",{className:"w-8 h-8 rounded-full ".concat(t," flex items-center justify-center text-white font-bold text-xs"),children:e})})(),(0,s.jsx)("span",{className:"text-sm font-medium text-slate-700",children:c.name})]}),(0,s.jsxs)("div",{className:"text-sm text-slate-500",children:["Step ",n," of ",i]})]}),(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:"text-sm font-medium text-slate-700",children:[l," XP"]})})]}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("h1",{className:"text-lg font-semibold text-slate-900",children:t})})]})]})}function AnimatedChoice(e){let{children:t,index:a,onClick:i,isSelected:r=!1,isCorrect:l=!1,isIncorrect:o=!1,disabled:c=!1}=e,[d,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(l||o){u(!0),x(!0);let e=setTimeout(()=>{u(!1),x(!1)},2e3);return()=>clearTimeout(e)}},[l,o]),(0,n.useEffect)(()=>{if("undefined"!=typeof document){let e=document.createElement("style");e.textContent="\n        @keyframes shake {\n          0%, 100% { transform: translateX(0); }\n          25% { transform: translateX(-5px); }\n          75% { transform: translateX(5px); }\n        }\n        .animate-shake {\n          animation: shake 0.5s ease-in-out;\n        }\n      ",document.head.appendChild(e)}},[]),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:i,disabled:c,className:"w-full h-12 rounded-xl border-2 font-medium text-left px-4 ".concat(c?"bg-slate-100 text-slate-400 cursor-not-allowed":l?"bg-emerald-500 text-white border-emerald-500 shadow-lg shadow-emerald-200":o?"bg-rose-500 text-white border-rose-500 shadow-lg shadow-rose-200":r?"bg-emerald-100 text-emerald-800 border-emerald-300 shadow-md":"bg-white text-slate-700 border-slate-200 hover:border-slate-300 hover:shadow-md"," ").concat((()=>{if(d){if(l)return"animate-bounce";if(o)return"animate-shake"}return"transition-all duration-300 hover:scale-105"})()),style:{animationDelay:"".concat(100*a,"ms"),transform:d?"scale(1.05)":"scale(1)"},children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("span",{className:"text-slate-500 font-bold text-lg",children:[a+1,"."]}),(0,s.jsx)("span",{className:"flex-1",children:t}),m&&(0,s.jsx)("span",{className:"text-2xl",children:l?"✅":o?"❌":""})]})}),d&&(0,s.jsx)("div",{className:"absolute inset-0 rounded-xl overflow-hidden",children:(0,s.jsx)("div",{className:"absolute inset-0 ".concat(l?"bg-emerald-200":"bg-rose-200"," animate-ping opacity-75")})})]})}function VisualFeedback(e){let{type:t,message:a,duration:i=2e3,onComplete:r}=e,[l,o]=(0,n.useState)(!0),[c,d]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{d(!0);let e=setTimeout(()=>{d(!1),setTimeout(()=>{o(!1),null==r||r()},300)},i);return()=>clearTimeout(e)},[i,r]),(0,n.useEffect)(()=>{if("undefined"!=typeof document){let e=document.createElement("style");e.textContent="\n        @keyframes shake {\n          0%, 100% { transform: translateX(0); }\n          25% { transform: translateX(-5px); }\n          75% { transform: translateX(5px); }\n        }\n        .animate-shake {\n          animation: shake 0.5s ease-in-out;\n        }\n      ",document.head.appendChild(e)}},[]),!l)return null;let u=(()=>{switch(t){case"success":return{bg:"bg-emerald-500",text:"text-white",icon:"✅",animation:"animate-bounce"};case"warning":return{bg:"bg-amber-500",text:"text-white",icon:"⚠️",animation:"animate-pulse"};case"error":return{bg:"bg-rose-500",text:"text-white",icon:"❌",animation:"animate-shake"};case"info":return{bg:"bg-blue-500",text:"text-white",icon:"ℹ️",animation:"animate-pulse"}}})();return(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 ".concat(c?u.animation:""),children:(0,s.jsxs)("div",{className:"".concat(u.bg," ").concat(u.text," px-6 py-4 rounded-xl shadow-lg flex items-center space-x-3 max-w-sm"),children:[(0,s.jsx)("span",{className:"text-2xl",children:u.icon}),(0,s.jsx)("span",{className:"font-medium",children:a})]})})}var l=a(2355),o=a(2542);let AudioManager=class AudioManager{static getInstance(){return AudioManager.instance||(AudioManager.instance=new AudioManager),AudioManager.instance}async loadSound(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2;if(!this.audioContext)return;let s=this.audioContext.sampleRate,n=s*a,i=this.audioContext.createBuffer(1,n,s),r=i.getChannelData(0);for(let e=0;e<n;e++)r[e]=.3*Math.sin(2*Math.PI*t*e/s);this.sounds.set(e,i)}async playSound(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(this.isEnabled&&this.audioContext&&this.sounds.has(e))try{let a=this.audioContext.createBufferSource(),s=this.audioContext.createGain();a.buffer=this.sounds.get(e),s.gain.value=t,a.connect(s),s.connect(this.audioContext.destination),a.start()}catch(e){console.warn("Audio playback failed:",e)}}async initializeSounds(){await this.loadSound("success",800,.3),await this.loadSound("error",300,.4),await this.loadSound("warning",600,.2),await this.loadSound("click",1e3,.1),await this.loadSound("timer",400,.1),await this.loadSound("badge",1200,.5)}setEnabled(e){this.isEnabled=e}isAudioEnabled(){return this.isEnabled}constructor(){this.audioContext=null,this.sounds=new Map,this.isEnabled=!0,this.audioContext=new(window.AudioContext||window.webkitAudioContext)}};let playSuccessSound=()=>AudioManager.getInstance().playSound("success",.6),playErrorSound=()=>AudioManager.getInstance().playSound("error",.7),playWarningSound=()=>AudioManager.getInstance().playSound("warning",.5),playClickSound=()=>AudioManager.getInstance().playSound("click",.3),playBadgeSound=()=>AudioManager.getInstance().playSound("badge",.8);var c=a(6212);function PlayPage(){let e=(0,i.useRouter)(),[t,a]=(0,n.useState)(null),[r,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(null),[p,f]=(0,n.useState)(!1),[b,g]=(0,n.useState)(null),[y,v]=(0,n.useState)(null),[k,j]=(0,n.useState)(null),[w]=(0,n.useState)(()=>new c.J),[N,S]=(0,n.useState)([]),[D,C]=(0,n.useState)(!1),[E]=(0,n.useState)(()=>AudioManager.getInstance());(0,n.useEffect)(()=>{let loadScenario=async()=>{try{let e=localStorage.getItem("kairo.scenario")||"escalating-bec",t=await fetch("/scenarios/".concat(e,".json")),s=await t.json();a(s)}catch(e){console.error("Failed to load scenario:",e),a({title:"Wire Transfer Mirage",personas:[{id:"acct"},{id:"pm"}],badges:[{tier:"Bronze",xp:10}],nodes:[{id:"intro",actor:"impostor",kind:"narrative",text:"Urgent vendor payment requested: 14,900 EUR. The sender claims to be the CEO.",choices:[{id:"c1",label:"Investigate",next:"end",effects:{xp:10,bias:[],feedback:"Good choice",severity:"good"}},{id:"c2",label:"Pay immediately",next:"end",effects:{xp:-5,bias:[],feedback:"Risky",severity:"bad"}}]},{id:"end",actor:"system",kind:"end",text:"Scenario complete."}]})}},t=localStorage.getItem("kairo.persona");if(!t){e.push("/");return}m(t);let s=localStorage.getItem("kairo.state");s?d(JSON.parse(s)):d({nodeId:"intro",xp:0,bias:{},steps:0,streak:0,events:[]}),loadScenario(),E.initializeSounds()},[e,E]),(0,n.useEffect)(()=>{if(t&&r){let e=t.nodes.find(e=>e.id===r.nodeId);h(e),(null==e?void 0:e.timerSec)&&(v(e.timerSec),j(Date.now()))}},[t,r]),(0,n.useEffect)(()=>{if(y&&y>0){let e=setTimeout(()=>{v(y-1)},1e3);return()=>clearTimeout(e)}if(0===y&&x&&k){let t=Date.now()-k,a=(0,o.Cj)(x,t);if(a){var e;let t=(0,o.Vd)(r,a,"timer_expired");d(t),localStorage.setItem("kairo.state",JSON.stringify(t));let s=null===(e=x.choices)||void 0===e?void 0:e.find(e=>"caution"===e.effects.severity);s&&setTimeout(()=>{_(s)},1200)}}},[y,x,k,r]);let _=(0,n.useCallback)(a=>{if(!r||!t)return;playClickSound();let s=(0,o.Vd)(r,a.effects,a.id);"good"===a.effects.severity?playSuccessSound():"bad"===a.effects.severity?playErrorSound():playWarningSound();let n=t.nodes.find(e=>e.id===a.next);if(n){if("end"===n.kind){let a={totalXP:s.xp,scenariosCompleted:1,currentStreak:s.streak,biasAvoided:Object.values(s.bias).reduce((e,t)=>e+t,0),perfectScores:s.xp>=40?1:0},n=w.checkAchievements(a);n.length>0&&(S(n),C(!0),playBadgeSound());let i={xp:s.xp,bias:s.bias,badges:t.badges,events:s.events};localStorage.setItem("kairo.result",JSON.stringify(i)),localStorage.removeItem("kairo.state"),e.push("/debrief")}else{let e={...s,nodeId:a.next};d(e),localStorage.setItem("kairo.state",JSON.stringify(e)),h(n),n.timerSec?(v(n.timerSec),j(Date.now())):v(null)}}g({text:a.effects.feedback,severity:a.effects.severity}),setTimeout(()=>g(null),1200)},[r,t,e,w]);if((0,n.useEffect)(()=>{let handleKeyPress=e=>{if(!(null==x?void 0:x.choices))return;let t=e.key;if(t>="1"&&t<="4"){let e=parseInt(t)-1,a=x.choices[e];a&&_(a)}};return window.addEventListener("keydown",handleKeyPress),()=>window.removeEventListener("keydown",handleKeyPress)},[x,_]),!t||!r||!u||!x)return(0,s.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Loading scenario..."})]})});let A=t.nodes.filter(e=>"end"!==e.kind),I=r.steps/A.length*100;return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,s.jsx)(SceneHeader,{title:t.title,personaId:u,step:r.steps+1,totalSteps:A.length,xp:r.xp,progressPercent:I}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-4",children:[null!==y&&(0,s.jsx)("div",{className:"mb-4 text-center",children:(0,s.jsxs)("div",{className:"inline-block px-4 py-2 rounded-lg font-medium ".concat(y<=5?"bg-rose-100 text-rose-800":"bg-amber-100 text-amber-800"),children:["Time remaining: ",y,"s"]})}),x.evidence&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("button",{onClick:()=>f(!p),className:"w-full h-12 bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium rounded-xl transition-colors","aria-label":"Toggle evidence drawer",children:[p?"Hide":"Show"," Evidence (",x.evidence.length,")"]}),p&&(0,s.jsx)("div",{className:"mt-4 space-y-3",children:x.evidence.map(e=>(0,s.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-medium text-slate-900 mb-2",children:e.label}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:e.text})]},e.id))})]}),(0,s.jsx)(CharacterBubble,{actorId:x.actor,delay:200,children:(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:x.text})}),r&&Object.keys(r.bias).length>0&&(0,s.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:Object.entries(r.bias).map(e=>{let[t,a]=e;return(0,s.jsx)(l.Z,{biasType:t,count:a,isActive:a>0},t)})}),x.choices&&(0,s.jsx)("div",{className:"mt-6 space-y-3",children:x.choices.map((e,t)=>(0,s.jsx)(AnimatedChoice,{index:t,onClick:()=>_(e),disabled:!1,children:e.label},e.id))}),b&&(0,s.jsx)(VisualFeedback,{type:"good"===b.severity?"success":"bad"===b.severity?"error":"warning",message:b.text,duration:2e3,onComplete:()=>g(null)})]}),D&&N.length>0&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFC6"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Achievement Unlocked!"}),N.map((e,t)=>(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:e.name}),(0,s.jsx)("p",{className:"text-slate-600 mb-2",children:e.description}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("common"===e.rarity?"bg-slate-100 text-slate-800":"rare"===e.rarity?"bg-blue-100 text-blue-800":"epic"===e.rarity?"bg-purple-100 text-purple-800":"bg-yellow-100 text-yellow-800"),children:e.rarity.toUpperCase()})]},e.id)),(0,s.jsx)("button",{onClick:()=>{C(!1),S([])},className:"w-full h-12 bg-emerald-500 hover:bg-emerald-600 text-white font-medium rounded-xl transition-colors",children:"Continue"})]})})]})}},2355:function(e,t,a){"use strict";a.d(t,{Z:function(){return BiasIndicator}});var s=a(7437);function BiasIndicator(e){let{biasType:t,count:a,isActive:n}=e,i={overconfidence:{color:"bg-red-100 text-red-800 border-red-200",icon:"\uD83C\uDFAF",label:"Overconfidence"},authority_bias:{color:"bg-orange-100 text-orange-800 border-orange-200",icon:"\uD83D\uDC51",label:"Authority Bias"},present_bias:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:"⏰",label:"Present Bias"},confirmation_bias:{color:"bg-purple-100 text-purple-800 border-purple-200",icon:"\uD83D\uDD0D",label:"Confirmation Bias"},curiosity_bias:{color:"bg-pink-100 text-pink-800 border-pink-200",icon:"\uD83D\uDD17",label:"Curiosity Bias"},alert_fatigue:{color:"bg-indigo-100 text-indigo-800 border-indigo-200",icon:"\uD83D\uDEA8",label:"Alert Fatigue"},optimism_bias:{color:"bg-green-100 text-green-800 border-green-200",icon:"☀️",label:"Optimism Bias"},status_quo:{color:"bg-gray-100 text-gray-800 border-gray-200",icon:"\uD83D\uDCCA",label:"Status Quo"},bandwagon_effect:{color:"bg-cyan-100 text-cyan-800 border-cyan-200",icon:"\uD83D\uDC65",label:"Bandwagon Effect"}}[t]||{color:"bg-slate-100 text-slate-800 border-slate-200",icon:"\uD83E\uDDE0",label:t};return(0,s.jsxs)("div",{className:"inline-flex items-center space-x-2 px-3 py-2 rounded-lg border-2 transition-all duration-300 ".concat(n?"".concat(i.color," scale-105 shadow-md"):"bg-slate-50 text-slate-500 border-slate-200"),children:[(0,s.jsx)("span",{className:"text-lg",children:i.icon}),(0,s.jsx)("span",{className:"text-sm font-medium",children:i.label}),a>0&&(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(n?"bg-white bg-opacity-50":"bg-slate-200"),children:a})]})}},6212:function(e,t,a){"use strict";a.d(t,{J:function(){return AchievementManager}});let s=[{id:"first_steps",name:"First Steps",description:"Complete your first scenario",icon:"\uD83D\uDC76",category:"scenario",requirement:{type:"scenarios",value:1},rarity:"common",unlocked:!1},{id:"security_master",name:"Security Master",description:"Complete all scenarios without falling for any attacks",icon:"\uD83D\uDEE1️",category:"security",requirement:{type:"scenarios",value:5},rarity:"legendary",unlocked:!1},{id:"perfect_score",name:"Perfect Score",description:"Achieve a perfect score in any scenario",icon:"\uD83D\uDCAF",category:"scenario",requirement:{type:"perfect_score",value:1},rarity:"epic",unlocked:!1},{id:"bias_breaker",name:"Bias Breaker",description:"Avoid 10 cognitive bias traps",icon:"\uD83E\uDDE0",category:"bias",requirement:{type:"bias_avoided",value:10},rarity:"rare",unlocked:!1},{id:"authority_skeptic",name:"Authority Skeptic",description:"Never fall for authority bias",icon:"\uD83D\uDC51",category:"bias",requirement:{type:"bias_avoided",value:5},rarity:"rare",unlocked:!1},{id:"time_pressure_master",name:"Time Pressure Master",description:"Make good decisions under time pressure",icon:"⏰",category:"bias",requirement:{type:"bias_avoided",value:3},rarity:"epic",unlocked:!1},{id:"quick_thinker",name:"Quick Thinker",description:"Complete a scenario in under 2 minutes",icon:"⚡",category:"speed",requirement:{type:"xp",value:50},rarity:"rare",unlocked:!1},{id:"lightning_reflexes",name:"Lightning Reflexes",description:"Complete 3 scenarios in under 5 minutes each",icon:"⚡⚡",category:"speed",requirement:{type:"scenarios",value:3},rarity:"epic",unlocked:!1},{id:"hot_streak",name:"Hot Streak",description:"Get 5 consecutive good decisions",icon:"\uD83D\uDD25",category:"streak",requirement:{type:"streak",value:5},rarity:"rare",unlocked:!1},{id:"unstoppable",name:"Unstoppable",description:"Get 10 consecutive good decisions",icon:"\uD83D\uDE80",category:"streak",requirement:{type:"streak",value:10},rarity:"legendary",unlocked:!1},{id:"xp_collector",name:"XP Collector",description:"Earn 100 total XP",icon:"\uD83D\uDC8E",category:"scenario",requirement:{type:"xp",value:100},rarity:"common",unlocked:!1},{id:"xp_master",name:"XP Master",description:"Earn 500 total XP",icon:"\uD83D\uDC8E\uD83D\uDC8E",category:"scenario",requirement:{type:"xp",value:500},rarity:"epic",unlocked:!1}];let AchievementManager=class AchievementManager{checkAchievements(e){let t=[];return this.achievements.forEach(a=>{if(a.unlocked)return;let s=!1,{type:n,value:i}=a.requirement;switch(n){case"xp":s=e.totalXP>=i;break;case"scenarios":s=e.scenariosCompleted>=i;break;case"streak":s=e.currentStreak>=i;break;case"bias_avoided":s=e.biasAvoided>=i;break;case"perfect_score":s=e.perfectScores>=i}s&&(a.unlocked=!0,a.unlockedAt=new Date,this.unlockedAchievements.push(a.id),t.push(a))}),this.saveProgress(),t}getUnlockedAchievements(){return this.achievements.filter(e=>e.unlocked)}getAchievementsByCategory(e){return this.achievements.filter(t=>t.category===e)}getRarityColor(e){switch(e){case"common":default:return"text-slate-500";case"rare":return"text-blue-500";case"epic":return"text-purple-500";case"legendary":return"text-yellow-500"}}loadProgress(){{let e=localStorage.getItem("kairo.achievements");e&&(this.unlockedAchievements=JSON.parse(e),this.achievements.forEach(e=>{this.unlockedAchievements.includes(e.id)&&(e.unlocked=!0)}))}}saveProgress(){localStorage.setItem("kairo.achievements",JSON.stringify(this.unlockedAchievements))}constructor(){this.achievements=[...s],this.unlockedAchievements=[],this.loadProgress()}}},2246:function(e,t,a){"use strict";a.d(t,{c:function(){return s}});let s={acct:{id:"acct",name:"Senior Accountant",avatar:"/characters/acct.svg",theme:"emerald"},pm:{id:"pm",name:"Project Manager",avatar:"/characters/pm.svg",theme:"emerald"},impostor:{id:"impostor",name:"Impostor",avatar:"/characters/impostor.svg",theme:"rose"},system:{id:"system",name:"System",avatar:"",theme:"slate"}}},2542:function(e,t,a){"use strict";function applyChoiceV2(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s={...e},n=t.xp||0;"good"===t.severity&&e.streak>0&&(n+=2),s.xp+=n,t.bias&&t.bias.forEach(e=>{s.bias[e]=(s.bias[e]||0)+1}),"good"===t.severity?s.streak+=1:s.streak=0;let i={nodeId:e.nodeId,choiceId:a,xp:n,bias:t.bias||[],ts:Date.now(),severity:t.severity||"caution"};return s.events.push(i),s.steps+=1,s}function tierFromXP(e,t){let a=t.sort((e,t)=>t.xp-e.xp);return a.find(t=>e>=t.xp)}function tickTimer(e,t){return e.timerSec&&t>1e3*e.timerSec?{xp:-5,bias:["present_bias"],feedback:"Time expired",severity:"caution"}:null}a.d(t,{Cj:function(){return tickTimer},GL:function(){return tierFromXP},Vd:function(){return applyChoiceV2}})},622:function(e,t,a){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=a(2265),n=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,a){var s,o={},c=null,d=null;for(s in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!l.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===o[s]&&(o[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:d,props:o,_owner:r.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,a){"use strict";e.exports=a(622)},4033:function(e,t,a){e.exports=a(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=4580)}),_N_E=e.O()}]);