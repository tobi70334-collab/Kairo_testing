(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[254],{1771:function(e,t,s){Promise.resolve().then(s.bind(s,5200))},5200:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return DebriefPage}});var a=s(7437),r=s(2265),i=s(1396),l=s.n(i);function BadgeModal(e){let{isOpen:t,onClose:s,tier:r,xp:i,reason:l}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:(e=>{switch(e.toLowerCase()){case"bronze":return"\uD83E\uDD49";case"silver":return"\uD83E\uDD48";case"gold":return"\uD83E\uDD47";default:return"\uD83C\uDFC6"}})(r)}),(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-2 ".concat((e=>{switch(e.toLowerCase()){case"bronze":return"text-amber-600";case"silver":default:return"text-slate-500";case"gold":return"text-yellow-500"}})(r)),children:[r," Badge Earned!"]}),(0,a.jsxs)("div",{className:"text-lg font-semibold text-slate-700 mb-2",children:[i," XP"]}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:l}),(0,a.jsx)("button",{onClick:s,className:"w-full h-12 bg-emerald-500 hover:bg-emerald-600 text-white font-medium rounded-xl transition-colors","aria-label":"Close badge modal",children:"Continue"})]})}):null}var n=s(2542),c=s(2246);function DebriefPage(){let[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)(null),[d,o]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("kairo.result"),s=localStorage.getItem("kairo.persona");if(!e||!s){window.location.href="/";return}let a=JSON.parse(e);t(a),i(s),localStorage.removeItem("kairo.result"),localStorage.removeItem("kairo.state");let r=(0,n.GL)(a.xp,a.badges);r&&(x(r),o(!0))},[]);let getSeverityIcon=e=>{switch(e){case"good":return"✅";case"caution":return"⚠️";case"bad":return"❌";default:return"•"}},formatTimestamp=e=>new Date(e).toLocaleTimeString();if(!e||!s)return(0,a.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Loading results..."})]})});let u=c.c[s],h=(()=>{if(!e)return[];let t=Object.entries(e.bias).filter(e=>{let[t]=e;return!t.startsWith("debias_")}).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).slice(0,2),s={overconfidence:["Pause and verify sender domains","Ask for a second check above 5k EUR"],authority_bias:["Voice confirm urgent CEO requests out of band"],alert_fatigue:["Treat high severity alerts as tasks, not popups"],present_bias:["Slow down when a timer is used as pressure"],confirmation_bias:["Verify using a separate, trusted channel"],curiosity_bias:["Do not click portals from email; go direct"]};return t.map(e=>{let[t,a]=e;return{bias:t,count:a,tips:s[t]||["Consider this bias in future decisions"]}})})();return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Training Complete"}),(0,a.jsxs)("p",{className:"text-slate-600 mb-4",children:["Well done, ",u.name,"!"]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:e.xp}),(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"XP Earned"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-slate-600",children:e.events.length}),(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"Decisions Made"})]})]})]})}),m&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-2xl p-6 mb-6 text-white text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"Bronze"===m.tier?"\uD83E\uDD49":"Silver"===m.tier?"\uD83E\uDD48":"\uD83E\uDD47"}),(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-2",children:[m.tier," Badge Earned!"]}),(0,a.jsx)("p",{className:"text-emerald-100",children:"You've demonstrated strong security awareness"})]}),h.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Bias Insights"}),(0,a.jsx)("div",{className:"space-y-4",children:h.map(e=>{let{bias:t,count:s,tips:r}=e;return(0,a.jsxs)("div",{className:"border-l-4 border-amber-400 pl-4",children:[(0,a.jsxs)("h4",{className:"font-medium text-slate-900 capitalize mb-2",children:[t.replace(/_/g," ")," (",s," instances)"]}),(0,a.jsx)("ul",{className:"space-y-1",children:r.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm text-slate-600",children:["• ",e]},t))})]},t)})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Decision Timeline"}),(0,a.jsx)("div",{className:"space-y-3",children:e.events.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-lg",children:getSeverityIcon(e.severity)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-slate-900",children:["Decision ",t+1]}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:[formatTimestamp(e.ts)," • ",e.xp>0?"+":"",e.xp," XP"]})]}),(0,a.jsx)("div",{className:"text-sm text-slate-600",children:e.bias.length>0&&(0,a.jsx)("span",{className:"text-xs bg-slate-200 px-2 py-1 rounded",children:e.bias.join(", ")})})]},t))})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(l(),{href:"/play",className:"inline-block w-full md:w-auto h-12 bg-emerald-500 hover:bg-emerald-600 text-white font-medium rounded-xl px-8 transition-colors","aria-label":"Play again",children:"Play Again"})})]}),(0,a.jsx)(BadgeModal,{isOpen:d,onClose:()=>o(!1),tier:(null==m?void 0:m.tier)||"",xp:(null==m?void 0:m.xp)||0,reason:"You've demonstrated strong security awareness"})]})}},2246:function(e,t,s){"use strict";s.d(t,{c:function(){return a}});let a={acct:{id:"acct",name:"Senior Accountant",avatar:"/characters/acct.svg",theme:"emerald"},pm:{id:"pm",name:"Project Manager",avatar:"/characters/pm.svg",theme:"emerald"},impostor:{id:"impostor",name:"Impostor",avatar:"/characters/impostor.svg",theme:"rose"},system:{id:"system",name:"System",avatar:"",theme:"slate"}}},2542:function(e,t,s){"use strict";function applyChoiceV2(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={...e},r=t.xp||0;"good"===t.severity&&e.streak>0&&(r+=2),a.xp+=r,t.bias&&t.bias.forEach(e=>{a.bias[e]=(a.bias[e]||0)+1}),"good"===t.severity?a.streak+=1:a.streak=0;let i={nodeId:e.nodeId,choiceId:s,xp:r,bias:t.bias||[],ts:Date.now(),severity:t.severity||"caution"};return a.events.push(i),a.steps+=1,a}function tierFromXP(e,t){let s=t.sort((e,t)=>t.xp-e.xp);return s.find(t=>e>=t.xp)}function tickTimer(e,t){return e.timerSec&&t>1e3*e.timerSec?{xp:-5,bias:["present_bias"],feedback:"Time expired",severity:"caution"}:null}s.d(t,{Cj:function(){return tickTimer},GL:function(){return tierFromXP},Vd:function(){return applyChoiceV2}})}},function(e){e.O(0,[176,971,472,744],function(){return e(e.s=1771)}),_N_E=e.O()}]);