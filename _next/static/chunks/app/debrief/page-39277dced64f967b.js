(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[254],{2487:function(e,t,s){Promise.resolve().then(s.bind(s,5200))},5200:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return DebriefPage}});var r=s(7437),a=s(2265),i=s(1396),n=s.n(i);function BadgeModal(e){let{isOpen:t,onClose:s,tier:a,xp:i,reason:n}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:(e=>{switch(e.toLowerCase()){case"bronze":return"\uD83E\uDD49";case"silver":return"\uD83E\uDD48";case"gold":return"\uD83E\uDD47";default:return"\uD83C\uDFC6"}})(a)}),(0,r.jsxs)("h2",{className:"text-2xl font-bold mb-2 ".concat((e=>{switch(e.toLowerCase()){case"bronze":return"text-amber-600";case"silver":default:return"text-slate-500";case"gold":return"text-yellow-500"}})(a)),children:[a," Badge Earned!"]}),(0,r.jsxs)("div",{className:"text-lg font-semibold text-slate-700 mb-2",children:[i," XP"]}),(0,r.jsx)("p",{className:"text-slate-600 mb-6",children:n}),(0,r.jsx)("button",{onClick:s,className:"w-full h-12 bg-emerald-500 hover:bg-emerald-600 text-white font-medium rounded-xl transition-colors","aria-label":"Close badge modal",children:"Continue"})]})}):null}var c=s(2355),l=s(4153),o=s(6456),d=s(2542),u=s(2246),m=s(6212);function DebriefPage(){let[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)(null),[x,h]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),[g]=(0,a.useState)(()=>new m.J),[v,f]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=localStorage.getItem("kairo.result"),s=localStorage.getItem("kairo.persona");if(!e||!s){window.location.href="/";return}let r=JSON.parse(e);t(r),i(s),localStorage.removeItem("kairo.result"),localStorage.removeItem("kairo.state");let a=(0,d.GL)(r.xp,r.badges);a&&(b(a),h(!0)),f(g.getUnlockedAchievements())},[]);let getSeverityIcon=e=>{switch(e){case"good":return"✅";case"caution":return"⚠️";case"bad":return"❌";default:return"ℹ️"}},formatTimestamp=e=>new Date(e).toLocaleTimeString();if(!e||!s)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-emerald-500 to-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Loading Results"}),(0,r.jsx)("p",{className:"text-slate-300",children:"Analyzing your performance..."})]})});let y=u.c[s],D=(()=>{if(!e)return[];let t=[];return e.bias.authority_bias>0&&t.push("Authority Bias: Always verify requests from executives through independent channels"),e.bias.present_bias>0&&t.push("Present Bias: Don't let urgency override security procedures"),e.bias.confirmation_bias>0&&t.push("Confirmation Bias: Seek evidence that contradicts your initial assumptions"),e.bias.overconfidence>0&&t.push("Overconfidence: Even experienced professionals can be targeted"),t})(),j=Math.round(e.events.filter(e=>"good"===e.severity).length/e.events.length*100);return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[(0,r.jsx)(l.Z,{title:"Training Complete",subtitle:"Well done, ".concat(y.name,"!"),level:j>=80?"low":j>=60?"medium":"high"}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsx)(o.Z,{title:"Performance Score",icon:"\uD83D\uDCCA",variant:"success",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl font-bold text-emerald-600 mb-2",children:e.xp}),(0,r.jsx)("div",{className:"text-slate-600 font-medium",children:"Total XP"})]})}),(0,r.jsx)(o.Z,{title:"Decisions Made",icon:"\uD83C\uDFAF",variant:"default",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl font-bold text-slate-800 mb-2",children:e.events.length}),(0,r.jsx)("div",{className:"text-slate-600 font-medium",children:"Total Decisions"})]})}),(0,r.jsx)(o.Z,{title:"Success Rate",icon:"\uD83C\uDFC6",variant:j>=80?"success":j>=60?"warning":"danger",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-4xl font-bold mb-2",children:[j,"%"]}),(0,r.jsx)("div",{className:"text-slate-600 font-medium",children:"Success Rate"})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,r.jsx)(o.Z,{title:"Bias Analysis",icon:"\uD83E\uDDE0",variant:"warning",children:(0,r.jsx)("div",{className:"space-y-4",children:Object.entries(e.bias).length>0?Object.entries(e.bias).map(e=>{let[t,s]=e;return(0,r.jsx)(c.Z,{biasType:t,count:s,isActive:s>0},t)}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDF89"}),(0,r.jsx)("p",{className:"text-slate-600 font-medium",children:"No biases detected!"}),(0,r.jsx)("p",{className:"text-slate-500 text-sm",children:"Excellent decision-making"})]})})}),(0,r.jsx)(o.Z,{title:"Achievements",icon:"\uD83C\uDFC6",variant:"default",children:(0,r.jsx)("div",{className:"space-y-3",children:v.length>0?v.slice(0,4).map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gradient-to-r from-slate-50 to-slate-100 rounded-lg",children:[(0,r.jsx)("span",{className:"text-2xl",children:e.icon}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-semibold text-slate-900",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-slate-600",children:e.description})]}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("common"===e.rarity?"bg-slate-200 text-slate-800":"rare"===e.rarity?"bg-blue-200 text-blue-800":"epic"===e.rarity?"bg-purple-200 text-purple-800":"bg-yellow-200 text-yellow-800"),children:e.rarity.toUpperCase()})]},e.id)):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDFAF"}),(0,r.jsx)("p",{className:"text-slate-600 font-medium",children:"No achievements yet"}),(0,r.jsx)("p",{className:"text-slate-500 text-sm",children:"Keep training to unlock badges"})]})})})]}),(0,r.jsx)(o.Z,{title:"Decision Timeline",icon:"\uD83D\uDCC8",variant:"default",className:"mb-8",children:(0,r.jsx)("div",{className:"space-y-4",children:e.events.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-gradient-to-r from-slate-50 to-slate-100 rounded-lg border border-slate-200",children:[(0,r.jsx)("div",{className:"text-2xl",children:getSeverityIcon(e.severity)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"font-semibold text-slate-900",children:["Decision ",t+1]}),(0,r.jsxs)("div",{className:"text-sm text-slate-500",children:[formatTimestamp(e.ts)," • ",e.xp>0?"+":"",e.xp," XP"]})]}),(0,r.jsx)("div",{className:"text-right",children:e.bias.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.bias.map((e,t)=>(0,r.jsx)("span",{className:"text-xs bg-slate-200 text-slate-700 px-2 py-1 rounded",children:e},t))})})]},t))})}),D.length>0&&(0,r.jsx)(o.Z,{title:"Improvement Tips",icon:"\uD83D\uDCA1",variant:"warning",className:"mb-8",children:(0,r.jsx)("div",{className:"space-y-3",children:D.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[(0,r.jsx)("span",{className:"text-amber-500 text-lg",children:"\uD83D\uDCA1"}),(0,r.jsx)("p",{className:"text-slate-700 text-sm",children:e})]},t))})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)(n(),{href:"/play",className:"inline-flex items-center space-x-3 px-8 py-4 bg-gradient-to-r from-emerald-500 to-blue-500 hover:from-emerald-600 hover:to-blue-600 text-white font-bold rounded-xl transition-all transform hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD04"}),(0,r.jsx)("span",{children:"Play Again"})]})})]}),x&&p&&(0,r.jsx)(BadgeModal,{isOpen:!0,onClose:()=>h(!1),tier:p.tier,xp:p.xp,reason:"Earned ".concat(p.tier," badge for ").concat(p.xp," XP")})]})}},2355:function(e,t,s){"use strict";s.d(t,{Z:function(){return BiasIndicator}});var r=s(7437);function BiasIndicator(e){let{biasType:t,count:s,isActive:a}=e,i={overconfidence:{color:"bg-red-100 text-red-800 border-red-200",icon:"\uD83C\uDFAF",label:"Overconfidence"},authority_bias:{color:"bg-orange-100 text-orange-800 border-orange-200",icon:"\uD83D\uDC51",label:"Authority Bias"},present_bias:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:"⏰",label:"Present Bias"},confirmation_bias:{color:"bg-purple-100 text-purple-800 border-purple-200",icon:"\uD83D\uDD0D",label:"Confirmation Bias"},curiosity_bias:{color:"bg-pink-100 text-pink-800 border-pink-200",icon:"\uD83D\uDD17",label:"Curiosity Bias"},alert_fatigue:{color:"bg-indigo-100 text-indigo-800 border-indigo-200",icon:"\uD83D\uDEA8",label:"Alert Fatigue"},optimism_bias:{color:"bg-green-100 text-green-800 border-green-200",icon:"☀️",label:"Optimism Bias"},status_quo:{color:"bg-gray-100 text-gray-800 border-gray-200",icon:"\uD83D\uDCCA",label:"Status Quo"},bandwagon_effect:{color:"bg-cyan-100 text-cyan-800 border-cyan-200",icon:"\uD83D\uDC65",label:"Bandwagon Effect"}}[t]||{color:"bg-slate-100 text-slate-800 border-slate-200",icon:"\uD83E\uDDE0",label:t};return(0,r.jsxs)("div",{className:"inline-flex items-center space-x-2 px-3 py-2 rounded-lg border-2 transition-all duration-300 ".concat(a?"".concat(i.color," scale-105 shadow-md"):"bg-slate-50 text-slate-500 border-slate-200"),children:[(0,r.jsx)("span",{className:"text-lg",children:i.icon}),(0,r.jsx)("span",{className:"text-sm font-medium",children:i.label}),s>0&&(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(a?"bg-white bg-opacity-50":"bg-slate-200"),children:s})]})}},6456:function(e,t,s){"use strict";s.d(t,{Z:function(){return SecurityCard}});var r=s(7437);function SecurityCard(e){let{title:t,icon:s,children:a,variant:i="default",className:n=""}=e;return(0,r.jsx)("div",{className:"rounded-xl border-2 shadow-lg ".concat((()=>{switch(i){case"warning":return"border-amber-200 bg-amber-50";case"danger":return"border-red-200 bg-red-50";case"success":return"border-emerald-200 bg-emerald-50";default:return"border-slate-200 bg-white"}})()," ").concat(n),children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat((()=>{switch(i){case"warning":return"bg-amber-100 text-amber-600";case"danger":return"bg-red-100 text-red-600";case"success":return"bg-emerald-100 text-emerald-600";default:return"bg-slate-100 text-slate-600"}})()),children:(0,r.jsx)("span",{className:"text-xl",children:s})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:t})]}),a]})})}},4153:function(e,t,s){"use strict";s.d(t,{Z:function(){return SecurityHeader}});var r=s(7437);function SecurityHeader(e){let{title:t,subtitle:s,level:a,progress:i=0}=e;return(0,r.jsx)("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-700",children:(0,r.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-emerald-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDEE1️"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:t}),s&&(0,r.jsx)("p",{className:"text-slate-300 text-lg",children:s})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)("div",{className:"px-4 py-2 rounded-lg border-2 flex items-center space-x-2 ".concat((()=>{switch(a){case"low":return"text-green-500 bg-green-100 border-green-200";case"medium":return"text-yellow-500 bg-yellow-100 border-yellow-200";case"high":return"text-orange-500 bg-orange-100 border-orange-200";case"critical":return"text-red-500 bg-red-100 border-red-200"}})()),children:[(0,r.jsx)("span",{className:"text-xl",children:(()=>{switch(a){case"low":return"\uD83D\uDFE2";case"medium":return"\uD83D\uDFE1";case"high":return"\uD83D\uDFE0";case"critical":return"\uD83D\uDD34"}})()}),(0,r.jsxs)("span",{className:"font-semibold uppercase text-sm",children:[a," Risk"]})]}),i>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-slate-300 text-sm",children:"Progress"}),(0,r.jsx)("div",{className:"w-32 h-2 bg-slate-700 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 transition-all duration-500",style:{width:"".concat(i,"%")}})}),(0,r.jsxs)("span",{className:"text-slate-300 text-sm font-mono",children:[i,"%"]})]})]})]})})})}},6212:function(e,t,s){"use strict";s.d(t,{J:function(){return AchievementManager}});let r=[{id:"first_steps",name:"First Steps",description:"Complete your first scenario",icon:"\uD83D\uDC76",category:"scenario",requirement:{type:"scenarios",value:1},rarity:"common",unlocked:!1},{id:"security_master",name:"Security Master",description:"Complete all scenarios without falling for any attacks",icon:"\uD83D\uDEE1️",category:"security",requirement:{type:"scenarios",value:5},rarity:"legendary",unlocked:!1},{id:"perfect_score",name:"Perfect Score",description:"Achieve a perfect score in any scenario",icon:"\uD83D\uDCAF",category:"scenario",requirement:{type:"perfect_score",value:1},rarity:"epic",unlocked:!1},{id:"bias_breaker",name:"Bias Breaker",description:"Avoid 10 cognitive bias traps",icon:"\uD83E\uDDE0",category:"bias",requirement:{type:"bias_avoided",value:10},rarity:"rare",unlocked:!1},{id:"authority_skeptic",name:"Authority Skeptic",description:"Never fall for authority bias",icon:"\uD83D\uDC51",category:"bias",requirement:{type:"bias_avoided",value:5},rarity:"rare",unlocked:!1},{id:"time_pressure_master",name:"Time Pressure Master",description:"Make good decisions under time pressure",icon:"⏰",category:"bias",requirement:{type:"bias_avoided",value:3},rarity:"epic",unlocked:!1},{id:"quick_thinker",name:"Quick Thinker",description:"Complete a scenario in under 2 minutes",icon:"⚡",category:"speed",requirement:{type:"xp",value:50},rarity:"rare",unlocked:!1},{id:"lightning_reflexes",name:"Lightning Reflexes",description:"Complete 3 scenarios in under 5 minutes each",icon:"⚡⚡",category:"speed",requirement:{type:"scenarios",value:3},rarity:"epic",unlocked:!1},{id:"hot_streak",name:"Hot Streak",description:"Get 5 consecutive good decisions",icon:"\uD83D\uDD25",category:"streak",requirement:{type:"streak",value:5},rarity:"rare",unlocked:!1},{id:"unstoppable",name:"Unstoppable",description:"Get 10 consecutive good decisions",icon:"\uD83D\uDE80",category:"streak",requirement:{type:"streak",value:10},rarity:"legendary",unlocked:!1},{id:"xp_collector",name:"XP Collector",description:"Earn 100 total XP",icon:"\uD83D\uDC8E",category:"scenario",requirement:{type:"xp",value:100},rarity:"common",unlocked:!1},{id:"xp_master",name:"XP Master",description:"Earn 500 total XP",icon:"\uD83D\uDC8E\uD83D\uDC8E",category:"scenario",requirement:{type:"xp",value:500},rarity:"epic",unlocked:!1}];let AchievementManager=class AchievementManager{checkAchievements(e){let t=[];return this.achievements.forEach(s=>{if(s.unlocked)return;let r=!1,{type:a,value:i}=s.requirement;switch(a){case"xp":r=e.totalXP>=i;break;case"scenarios":r=e.scenariosCompleted>=i;break;case"streak":r=e.currentStreak>=i;break;case"bias_avoided":r=e.biasAvoided>=i;break;case"perfect_score":r=e.perfectScores>=i}r&&(s.unlocked=!0,s.unlockedAt=new Date,this.unlockedAchievements.push(s.id),t.push(s))}),this.saveProgress(),t}getUnlockedAchievements(){return this.achievements.filter(e=>e.unlocked)}getAchievementsByCategory(e){return this.achievements.filter(t=>t.category===e)}getRarityColor(e){switch(e){case"common":default:return"text-slate-500";case"rare":return"text-blue-500";case"epic":return"text-purple-500";case"legendary":return"text-yellow-500"}}loadProgress(){{let e=localStorage.getItem("kairo.achievements");e&&(this.unlockedAchievements=JSON.parse(e),this.achievements.forEach(e=>{this.unlockedAchievements.includes(e.id)&&(e.unlocked=!0)}))}}saveProgress(){localStorage.setItem("kairo.achievements",JSON.stringify(this.unlockedAchievements))}constructor(){this.achievements=[...r],this.unlockedAchievements=[],this.loadProgress()}}},2246:function(e,t,s){"use strict";s.d(t,{c:function(){return r}});let r={acct:{id:"acct",name:"Senior Accountant",avatar:"/characters/acct.svg",theme:"emerald"},pm:{id:"pm",name:"Project Manager",avatar:"/characters/pm.svg",theme:"emerald"},impostor:{id:"impostor",name:"Impostor",avatar:"/characters/impostor.svg",theme:"rose"},system:{id:"system",name:"System",avatar:"",theme:"slate"}}},2542:function(e,t,s){"use strict";function applyChoiceV2(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r={...e},a=t.xp||0;"good"===t.severity&&e.streak>0&&(a+=2),r.xp+=a,t.bias&&t.bias.forEach(e=>{r.bias[e]=(r.bias[e]||0)+1}),"good"===t.severity?r.streak+=1:r.streak=0;let i={nodeId:e.nodeId,choiceId:s,xp:a,bias:t.bias||[],ts:Date.now(),severity:t.severity||"caution"};return r.events.push(i),r.steps+=1,r}function tierFromXP(e,t){let s=t.sort((e,t)=>t.xp-e.xp);return s.find(t=>e>=t.xp)}function tickTimer(e,t){return e.timerSec&&t>1e3*e.timerSec?{xp:-5,bias:["present_bias"],feedback:"Time expired",severity:"caution"}:null}s.d(t,{Cj:function(){return tickTimer},GL:function(){return tierFromXP},Vd:function(){return applyChoiceV2}})}},function(e){e.O(0,[176,971,472,744],function(){return e(e.s=2487)}),_N_E=e.O()}]);