(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[254],{1771:function(e,t,s){Promise.resolve().then(s.bind(s,5200))},5200:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return DebriefPage}});var a=s(7437),r=s(2265),i=s(1396),n=s.n(i);function BadgeModal(e){let{isOpen:t,onClose:s,tier:r,xp:i,reason:n}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:(e=>{switch(e.toLowerCase()){case"bronze":return"\uD83E\uDD49";case"silver":return"\uD83E\uDD48";case"gold":return"\uD83E\uDD47";default:return"\uD83C\uDFC6"}})(r)}),(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-2 ".concat((e=>{switch(e.toLowerCase()){case"bronze":return"text-amber-600";case"silver":default:return"text-slate-500";case"gold":return"text-yellow-500"}})(r)),children:[r," Badge Earned!"]}),(0,a.jsxs)("div",{className:"text-lg font-semibold text-slate-700 mb-2",children:[i," XP"]}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:n}),(0,a.jsx)("button",{onClick:s,className:"w-full h-12 bg-emerald-500 hover:bg-emerald-600 text-white font-medium rounded-xl transition-colors","aria-label":"Close badge modal",children:"Continue"})]})}):null}var l=s(2355),c=s(2542),o=s(2246),d=s(6212);function DebriefPage(){let[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)(null),[m,u]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null),[p]=(0,r.useState)(()=>new d.J),[b,g]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=localStorage.getItem("kairo.result"),s=localStorage.getItem("kairo.persona");if(!e||!s){window.location.href="/";return}let a=JSON.parse(e);t(a),i(s),localStorage.removeItem("kairo.result"),localStorage.removeItem("kairo.state");let r=(0,c.GL)(a.xp,a.badges);r&&(h(r),u(!0)),g(p.getUnlockedAchievements())},[]);let getSeverityIcon=e=>{switch(e){case"good":return"✅";case"caution":return"⚠️";case"bad":return"❌";default:return"•"}},formatTimestamp=e=>new Date(e).toLocaleTimeString();if(!e||!s)return(0,a.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Loading results..."})]})});let v=o.c[s],f=(()=>{if(!e)return[];let t=Object.entries(e.bias).filter(e=>{let[t]=e;return!t.startsWith("debias_")}).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).slice(0,2),s={overconfidence:["Pause and verify sender domains","Ask for a second check above 5k EUR"],authority_bias:["Voice confirm urgent CEO requests out of band"],alert_fatigue:["Treat high severity alerts as tasks, not popups"],present_bias:["Slow down when a timer is used as pressure"],confirmation_bias:["Verify using a separate, trusted channel"],curiosity_bias:["Do not click portals from email; go direct"]};return t.map(e=>{let[t,a]=e;return{bias:t,count:a,tips:s[t]||["Consider this bias in future decisions"]}})})();return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Training Complete"}),(0,a.jsxs)("p",{className:"text-slate-600 mb-4",children:["Well done, ",v.name,"!"]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:e.xp}),(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"XP Earned"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-slate-600",children:e.events.length}),(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"Decisions Made"})]})]})]})}),x&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-2xl p-6 mb-6 text-white text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"Bronze"===x.tier?"\uD83E\uDD49":"Silver"===x.tier?"\uD83E\uDD48":"\uD83E\uDD47"}),(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-2",children:[x.tier," Badge Earned!"]}),(0,a.jsx)("p",{className:"text-emerald-100",children:"You've demonstrated strong security awareness"})]}),f.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Bias Insights"}),(0,a.jsx)("div",{className:"space-y-4",children:f.map(e=>{let{bias:t,count:s,tips:r}=e;return(0,a.jsxs)("div",{className:"border-l-4 border-amber-400 pl-4",children:[(0,a.jsxs)("h4",{className:"font-medium text-slate-900 capitalize mb-2",children:[t.replace(/_/g," ")," (",s," instances)"]}),(0,a.jsx)("ul",{className:"space-y-1",children:r.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm text-slate-600",children:["• ",e]},t))})]},t)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Performance"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-slate-600",children:"Total XP"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-emerald-600",children:e.xp})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-slate-600",children:"Decisions Made"}),(0,a.jsx)("span",{className:"text-xl font-semibold text-slate-800",children:e.events.length})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-slate-600",children:"Success Rate"}),(0,a.jsxs)("span",{className:"text-xl font-semibold text-slate-800",children:[Math.round(e.events.filter(e=>"good"===e.severity).length/e.events.length*100),"%"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Bias Analysis"}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(e.bias).length>0?Object.entries(e.bias).map(e=>{let[t,s]=e;return(0,a.jsx)(l.Z,{biasType:t,count:s,isActive:s>0},t)}):(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"No biases detected"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Achievements"}),(0,a.jsxs)("div",{className:"space-y-2",children:[b.length>0?b.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-lg",children:e.icon}),(0,a.jsx)("span",{className:"text-sm text-slate-700",children:e.name})]},e.id)):(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"No achievements yet"}),b.length>3&&(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["+",b.length-3," more"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Decision Timeline"}),(0,a.jsx)("div",{className:"space-y-3",children:e.events.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-lg",children:getSeverityIcon(e.severity)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-slate-900",children:["Decision ",t+1]}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:[formatTimestamp(e.ts)," • ",e.xp>0?"+":"",e.xp," XP"]})]}),(0,a.jsx)("div",{className:"text-sm text-slate-600",children:e.bias.length>0&&(0,a.jsx)("span",{className:"text-xs bg-slate-200 px-2 py-1 rounded",children:e.bias.join(", ")})})]},t))})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(n(),{href:"/play",className:"inline-block w-full md:w-auto h-12 bg-emerald-500 hover:bg-emerald-600 text-white font-medium rounded-xl px-8 transition-colors","aria-label":"Play again",children:"Play Again"})})]}),(0,a.jsx)(BadgeModal,{isOpen:m,onClose:()=>u(!1),tier:(null==x?void 0:x.tier)||"",xp:(null==x?void 0:x.xp)||0,reason:"You've demonstrated strong security awareness"})]})}},2355:function(e,t,s){"use strict";s.d(t,{Z:function(){return BiasIndicator}});var a=s(7437);function BiasIndicator(e){let{biasType:t,count:s,isActive:r}=e,i={overconfidence:{color:"bg-red-100 text-red-800 border-red-200",icon:"\uD83C\uDFAF",label:"Overconfidence"},authority_bias:{color:"bg-orange-100 text-orange-800 border-orange-200",icon:"\uD83D\uDC51",label:"Authority Bias"},present_bias:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:"⏰",label:"Present Bias"},confirmation_bias:{color:"bg-purple-100 text-purple-800 border-purple-200",icon:"\uD83D\uDD0D",label:"Confirmation Bias"},curiosity_bias:{color:"bg-pink-100 text-pink-800 border-pink-200",icon:"\uD83D\uDD17",label:"Curiosity Bias"},alert_fatigue:{color:"bg-indigo-100 text-indigo-800 border-indigo-200",icon:"\uD83D\uDEA8",label:"Alert Fatigue"},optimism_bias:{color:"bg-green-100 text-green-800 border-green-200",icon:"☀️",label:"Optimism Bias"},status_quo:{color:"bg-gray-100 text-gray-800 border-gray-200",icon:"\uD83D\uDCCA",label:"Status Quo"},bandwagon_effect:{color:"bg-cyan-100 text-cyan-800 border-cyan-200",icon:"\uD83D\uDC65",label:"Bandwagon Effect"}}[t]||{color:"bg-slate-100 text-slate-800 border-slate-200",icon:"\uD83E\uDDE0",label:t};return(0,a.jsxs)("div",{className:"inline-flex items-center space-x-2 px-3 py-2 rounded-lg border-2 transition-all duration-300 ".concat(r?"".concat(i.color," scale-105 shadow-md"):"bg-slate-50 text-slate-500 border-slate-200"),children:[(0,a.jsx)("span",{className:"text-lg",children:i.icon}),(0,a.jsx)("span",{className:"text-sm font-medium",children:i.label}),s>0&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(r?"bg-white bg-opacity-50":"bg-slate-200"),children:s})]})}},6212:function(e,t,s){"use strict";s.d(t,{J:function(){return AchievementManager}});let a=[{id:"first_steps",name:"First Steps",description:"Complete your first scenario",icon:"\uD83D\uDC76",category:"scenario",requirement:{type:"scenarios",value:1},rarity:"common",unlocked:!1},{id:"security_master",name:"Security Master",description:"Complete all scenarios without falling for any attacks",icon:"\uD83D\uDEE1️",category:"security",requirement:{type:"scenarios",value:5},rarity:"legendary",unlocked:!1},{id:"perfect_score",name:"Perfect Score",description:"Achieve a perfect score in any scenario",icon:"\uD83D\uDCAF",category:"scenario",requirement:{type:"perfect_score",value:1},rarity:"epic",unlocked:!1},{id:"bias_breaker",name:"Bias Breaker",description:"Avoid 10 cognitive bias traps",icon:"\uD83E\uDDE0",category:"bias",requirement:{type:"bias_avoided",value:10},rarity:"rare",unlocked:!1},{id:"authority_skeptic",name:"Authority Skeptic",description:"Never fall for authority bias",icon:"\uD83D\uDC51",category:"bias",requirement:{type:"bias_avoided",value:5},rarity:"rare",unlocked:!1},{id:"time_pressure_master",name:"Time Pressure Master",description:"Make good decisions under time pressure",icon:"⏰",category:"bias",requirement:{type:"bias_avoided",value:3},rarity:"epic",unlocked:!1},{id:"quick_thinker",name:"Quick Thinker",description:"Complete a scenario in under 2 minutes",icon:"⚡",category:"speed",requirement:{type:"xp",value:50},rarity:"rare",unlocked:!1},{id:"lightning_reflexes",name:"Lightning Reflexes",description:"Complete 3 scenarios in under 5 minutes each",icon:"⚡⚡",category:"speed",requirement:{type:"scenarios",value:3},rarity:"epic",unlocked:!1},{id:"hot_streak",name:"Hot Streak",description:"Get 5 consecutive good decisions",icon:"\uD83D\uDD25",category:"streak",requirement:{type:"streak",value:5},rarity:"rare",unlocked:!1},{id:"unstoppable",name:"Unstoppable",description:"Get 10 consecutive good decisions",icon:"\uD83D\uDE80",category:"streak",requirement:{type:"streak",value:10},rarity:"legendary",unlocked:!1},{id:"xp_collector",name:"XP Collector",description:"Earn 100 total XP",icon:"\uD83D\uDC8E",category:"scenario",requirement:{type:"xp",value:100},rarity:"common",unlocked:!1},{id:"xp_master",name:"XP Master",description:"Earn 500 total XP",icon:"\uD83D\uDC8E\uD83D\uDC8E",category:"scenario",requirement:{type:"xp",value:500},rarity:"epic",unlocked:!1}];let AchievementManager=class AchievementManager{checkAchievements(e){let t=[];return this.achievements.forEach(s=>{if(s.unlocked)return;let a=!1,{type:r,value:i}=s.requirement;switch(r){case"xp":a=e.totalXP>=i;break;case"scenarios":a=e.scenariosCompleted>=i;break;case"streak":a=e.currentStreak>=i;break;case"bias_avoided":a=e.biasAvoided>=i;break;case"perfect_score":a=e.perfectScores>=i}a&&(s.unlocked=!0,s.unlockedAt=new Date,this.unlockedAchievements.push(s.id),t.push(s))}),this.saveProgress(),t}getUnlockedAchievements(){return this.achievements.filter(e=>e.unlocked)}getAchievementsByCategory(e){return this.achievements.filter(t=>t.category===e)}getRarityColor(e){switch(e){case"common":default:return"text-slate-500";case"rare":return"text-blue-500";case"epic":return"text-purple-500";case"legendary":return"text-yellow-500"}}loadProgress(){{let e=localStorage.getItem("kairo.achievements");e&&(this.unlockedAchievements=JSON.parse(e),this.achievements.forEach(e=>{this.unlockedAchievements.includes(e.id)&&(e.unlocked=!0)}))}}saveProgress(){localStorage.setItem("kairo.achievements",JSON.stringify(this.unlockedAchievements))}constructor(){this.achievements=[...a],this.unlockedAchievements=[],this.loadProgress()}}},2246:function(e,t,s){"use strict";s.d(t,{c:function(){return a}});let a={acct:{id:"acct",name:"Senior Accountant",avatar:"/characters/acct.svg",theme:"emerald"},pm:{id:"pm",name:"Project Manager",avatar:"/characters/pm.svg",theme:"emerald"},impostor:{id:"impostor",name:"Impostor",avatar:"/characters/impostor.svg",theme:"rose"},system:{id:"system",name:"System",avatar:"",theme:"slate"}}},2542:function(e,t,s){"use strict";function applyChoiceV2(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={...e},r=t.xp||0;"good"===t.severity&&e.streak>0&&(r+=2),a.xp+=r,t.bias&&t.bias.forEach(e=>{a.bias[e]=(a.bias[e]||0)+1}),"good"===t.severity?a.streak+=1:a.streak=0;let i={nodeId:e.nodeId,choiceId:s,xp:r,bias:t.bias||[],ts:Date.now(),severity:t.severity||"caution"};return a.events.push(i),a.steps+=1,a}function tierFromXP(e,t){let s=t.sort((e,t)=>t.xp-e.xp);return s.find(t=>e>=t.xp)}function tickTimer(e,t){return e.timerSec&&t>1e3*e.timerSec?{xp:-5,bias:["present_bias"],feedback:"Time expired",severity:"caution"}:null}s.d(t,{Cj:function(){return tickTimer},GL:function(){return tierFromXP},Vd:function(){return applyChoiceV2}})}},function(e){e.O(0,[176,971,472,744],function(){return e(e.s=1771)}),_N_E=e.O()}]);